<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Sam Lantinga slouken@libsdl.org">
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Raspberry Pi - SDL</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Raspberry Pi";
    var mkdocs_page_input_path = "README-raspberrypi.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/c.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> SDL</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">General</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../README-cmake/">CMake</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../README-git/">Git</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../README-hg/">HG</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../README-visualc/">VisualC</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../README-kmsbsd/">KMSDRN</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../README-porting/">Porting</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../README-directfb/">DirectFB</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../README-dynapi/">DynAPI</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../README-gesture/">Gestures</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../README-touch/">Touch</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Platform</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="../README-platforms/">Overview</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../README-android/">Android</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../README-emscripten/">Empscripten</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../README-linux/">Linux</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../README-macosx/">OS X</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../README-ios/">iOS</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../README-nacl/">NativeClient</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../README-os2/">OS2</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../README-pandora/">Pandora</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../README-psp/">PSP</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Raspberry Pi</a>
    <ul class="current">
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../README-wince/">WinCE</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../README-windows/">Windows</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../README-winrt/">WinRT</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">SDL</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Platform &raquo;</li>
        
      
    
    <li>Raspberry Pi</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/libsdl-org/SDL/edit/master/docs/README-raspberrypi.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="raspberry-pi">Raspberry Pi</h1>
<p>Requirements:</p>
<p>Raspbian (other Linux distros may work as well).</p>
<p>================================================================================
 Features
================================================================================</p>
<ul>
<li>Works without X11</li>
<li>Hardware accelerated OpenGL ES 2.x</li>
<li>Sound via ALSA</li>
<li>Input (mouse/keyboard/joystick) via EVDEV</li>
<li>Hotplugging of input devices via UDEV</li>
</ul>
<p>================================================================================
 Raspbian Build Dependencies
================================================================================</p>
<p>sudo apt-get install libudev-dev libasound2-dev libdbus-1-dev</p>
<p>You also need the VideoCore binary stuff that ships in /opt/vc for EGL and 
OpenGL ES 2.x, it usually comes pre-installed, but in any case:</p>
<p>sudo apt-get install libraspberrypi0 libraspberrypi-bin libraspberrypi-dev</p>
<p>================================================================================
 NEON
================================================================================</p>
<p>If your Pi has NEON support, make sure you add -mfpu=neon to your CFLAGS so
that SDL will select some otherwise-disabled highly-optimized code. The
original Pi units don't have NEON, the Pi2 probably does, and the Pi3
definitely does.</p>
<p>================================================================================
 Cross compiling from x86 Linux
================================================================================</p>
<p>To cross compile SDL for Raspbian from your desktop machine, you'll need a
Raspbian system root and the cross compilation tools. We'll assume these tools
will be placed in /opt/rpi-tools</p>
<pre><code>sudo git clone --depth 1 https://github.com/raspberrypi/tools /opt/rpi-tools
</code></pre>
<p>You'll also need a Raspbian binary image.
Get it from: http://downloads.raspberrypi.org/raspbian_latest 
After unzipping, you'll get file with a name like: "<date>-wheezy-raspbian.img"
Let's assume the sysroot will be built in /opt/rpi-sysroot.</p>
<pre><code>export SYSROOT=/opt/rpi-sysroot
sudo kpartx -a -v &lt;path_to_raspbian_image&gt;.img
sudo mount -o loop /dev/mapper/loop0p2 /mnt
sudo cp -r /mnt $SYSROOT
sudo apt-get install qemu binfmt-support qemu-user-static
sudo cp /usr/bin/qemu-arm-static $SYSROOT/usr/bin
sudo mount --bind /dev $SYSROOT/dev
sudo mount --bind /proc $SYSROOT/proc
sudo mount --bind /sys $SYSROOT/sys
</code></pre>
<p>Now, before chrooting into the ARM sysroot, you'll need to apply a workaround,
edit $SYSROOT/etc/ld.so.preload and comment out all lines in it.</p>
<pre><code>sudo chroot $SYSROOT
apt-get install libudev-dev libasound2-dev libdbus-1-dev libraspberrypi0 libraspberrypi-bin libraspberrypi-dev libx11-dev libxext-dev libxrandr-dev libxcursor-dev libxi-dev libxinerama-dev libxxf86vm-dev libxss-dev
exit
sudo umount $SYSROOT/dev
sudo umount $SYSROOT/proc
sudo umount $SYSROOT/sys
sudo umount /mnt
</code></pre>
<p>There's one more fix required, as the libdl.so symlink uses an absolute path 
which doesn't quite work in our setup.</p>
<pre><code>sudo rm -rf $SYSROOT/usr/lib/arm-linux-gnueabihf/libdl.so
sudo ln -s ../../../lib/arm-linux-gnueabihf/libdl.so.2 $SYSROOT/usr/lib/arm-linux-gnueabihf/libdl.so
</code></pre>
<p>The final step is compiling SDL itself.</p>
<pre><code>export CC="/opt/rpi-tools/arm-bcm2708/gcc-linaro-arm-linux-gnueabihf-raspbian/bin/arm-linux-gnueabihf-gcc --sysroot=$SYSROOT -I$SYSROOT/opt/vc/include -I$SYSROOT/usr/include -I$SYSROOT/opt/vc/include/interface/vcos/pthreads -I$SYSROOT/opt/vc/include/interface/vmcs_host/linux"
cd &lt;SDL SOURCE&gt;
mkdir -p build;cd build
LDFLAGS="-L$SYSROOT/opt/vc/lib" ../configure --with-sysroot=$SYSROOT --host=arm-raspberry-linux-gnueabihf --prefix=$PWD/rpi-sdl2-installed --disable-pulseaudio --disable-esd
make
make install
</code></pre>
<p>To be able to deploy this to /usr/local in the Raspbian system you need to fix up a few paths:</p>
<pre><code>perl -w -pi -e "s#$PWD/rpi-sdl2-installed#/usr/local#g;" ./rpi-sdl2-installed/lib/libSDL2.la ./rpi-sdl2-installed/lib/pkgconfig/sdl2.pc ./rpi-sdl2-installed/bin/sdl2-config
</code></pre>
<p>================================================================================
 Apps don't work or poor video/audio performance
================================================================================</p>
<p>If you get sound problems, buffer underruns, etc, run "sudo rpi-update" to 
update the RPi's firmware. Note that doing so will fix these problems, but it
will also render the CMA - Dynamic Memory Split functionality useless.</p>
<p>Also, by default the Raspbian distro configures the GPU RAM at 64MB, this is too
low in general, specially if a 1080p TV is hooked up.</p>
<p>See here how to configure this setting: http://elinux.org/RPiconfig</p>
<p>Using a fixed gpu_mem=128 is the best option (specially if you updated the 
firmware, using CMA probably won't work, at least it's the current case).</p>
<p>================================================================================
 No input
================================================================================</p>
<p>Make sure you belong to the "input" group.</p>
<pre><code>sudo usermod -aG input `whoami`
</code></pre>
<p>================================================================================
 No HDMI Audio
================================================================================</p>
<p>If you notice that ALSA works but there's no audio over HDMI, try adding:</p>
<pre><code>hdmi_drive=2
</code></pre>
<p>to your config.txt file and reboot.</p>
<p>Reference: http://www.raspberrypi.org/phpBB3/viewtopic.php?t=5062</p>
<p>================================================================================
 Text Input API support
================================================================================</p>
<p>The Text Input API is supported, with translation of scan codes done via the
kernel symbol tables. For this to work, SDL needs access to a valid console.
If you notice there's no SDL_TEXTINPUT message being emitted, double check that
your app has read access to one of the following:</p>
<ul>
<li>/proc/self/fd/0</li>
<li>/dev/tty</li>
<li>/dev/tty[0...6]</li>
<li>/dev/vc/0</li>
<li>/dev/console</li>
</ul>
<p>This is usually not a problem if you run from the physical terminal (as opposed
to running from a pseudo terminal, such as via SSH). If running from a PTS, a 
quick workaround is to run your app as root or add yourself to the tty group,
then re-login to the system.</p>
<pre><code>sudo usermod -aG tty `whoami`
</code></pre>
<p>The keyboard layout used by SDL is the same as the one the kernel uses.
To configure the layout on Raspbian:</p>
<pre><code>sudo dpkg-reconfigure keyboard-configuration
</code></pre>
<p>To configure the locale, which controls which keys are interpreted as letters,
this determining the CAPS LOCK behavior:</p>
<pre><code>sudo dpkg-reconfigure locales
</code></pre>
<p>================================================================================
 OpenGL problems
================================================================================</p>
<p>If you have desktop OpenGL headers installed at build time in your RPi or cross 
compilation environment, support for it will be built in. However, the chipset 
does not actually have support for it, which causes issues in certain SDL apps 
since the presence of OpenGL support supersedes the ES/ES2 variants.
The workaround is to disable OpenGL at configuration time:</p>
<pre><code>./configure --disable-video-opengl
</code></pre>
<p>Or if the application uses the Render functions, you can use the SDL_RENDER_DRIVER
environment variable:</p>
<pre><code>export SDL_RENDER_DRIVER=opengles2
</code></pre>
<p>================================================================================
 Notes
================================================================================</p>
<ul>
<li>When launching apps remotely (via SSH), SDL can prevent local keystrokes from
  leaking into the console only if it has root privileges. Launching apps locally
  does not suffer from this issue.</li>
</ul>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../README-wince/" class="btn btn-neutral float-right" title="WinCE">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../README-psp/" class="btn btn-neutral" title="PSP"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/libsdl-org/SDL/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../README-psp/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../README-wince/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
